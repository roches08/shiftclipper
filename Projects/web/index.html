<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShiftClipper Tracker</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 16px; }
    .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .card { border:1px solid #ddd; border-radius:12px; padding:12px; margin:12px 0; }
    .pill { display:inline-block; padding:4px 10px; border-radius:999px; background:#eee; }
    .bar { height:16px; background:#eee; border-radius:999px; overflow:hidden; position:relative; width:360px; }
    .barFill { height:100%; width:0%; background:#2b7cff; }
    .barText { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:12px; }
    .videoWrap { position:relative; max-width: 980px; }
    video { width:100%; background:#000; border-radius:12px; }
    canvas { position:absolute; left:0; top:0; pointer-events:none; }
    label { font-size: 13px; color:#333; }
    input, select { padding:6px 8px; border-radius:10px; border:1px solid #ccc; }
    button { padding:8px 12px; border-radius:10px; border:1px solid #bbb; background:#fff; cursor:pointer; }
    button:disabled { opacity: .45; cursor:not-allowed; }
    pre { background:#0b1020; color:#e8eefc; padding:12px; border-radius:12px; overflow:auto; }
    .hint { font-size:13px; color:#444; }
    .small { font-size:12px; color:#666; }
    .sep { width: 1px; height: 26px; background:#e5e5e5; display:inline-block; margin: 0 2px; }
  </style>
</head>
<body>

<h2>ShiftClipper — Broadcast Tracker</h2>

<div class="card">
  <div class="row">
    <button id="btnCreate">Create Job</button>
    <span>Job: <b id="jobId">—</b></span>
    <span class="pill" id="pill">idle</span>
  </div>

  <div style="margin-top:10px" class="row">
    <div class="bar">
      <div class="barFill" id="barFill"></div>
      <div class="barText" id="barText">idle</div>
    </div>
  </div>

  <div style="margin-top:10px" class="row">
    <input id="file" type="file" accept="video/*" />
    <button id="btnUpload" disabled>Upload</button>
  </div>

  <div style="margin-top:10px" class="row">
    <label>Camera</label>
    <select id="cameraMode">
      <option value="broadcast" selected>broadcast</option>
      <option value="tactical">tactical</option>
    </select>

    <span class="sep"></span>

    <label>Jersey #</label>
    <input id="playerNumber" type="text" inputmode="numeric" placeholder="e.g. 8" style="width:80px" />

    <label>Jersey color</label>
    <input id="jerseyColor" type="color" value="#1d3936" />

    <label>Opponent color (optional)</label>
    <input id="oppColor" type="color" value="#ffffff" />

    <span class="sep"></span>

    <label>Auto-extend (sec)</label>
    <input id="extendSec" type="number" min="0" max="60" value="2" style="width:90px" />

    <label>Verify</label>
    <select id="verifyMode">
      <option value="off" selected>off</option>
      <option value="on">on</option>
    </select>
  </div>

  <div style="margin-top:10px" class="row">
    <label>Min clicks</label>
    <select id="minClicks">
      <option value="1">1</option>
      <option value="2" selected>2</option>
      <option value="3">3</option>
    </select>

    <label>Max clicks</label>
    <select id="maxClicks">
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6" selected>6</option>
      <option value="8">8</option>
    </select>

    <span class="sep"></span>

    <label><input id="useColor" type="checkbox" checked /> Use color filter</label>
    <label><input id="useNumber" type="checkbox" checked /> Use jersey-number tracking</label>
  </div>

  <div style="margin-top:10px" class="row">
    <button id="btnSelect" disabled>Select Player (clicks OFF)</button>
    <button id="btnClearClicks" disabled>Clear clicks</button>
    <button id="btnSave" disabled>Save setup</button>
    <button id="btnRun" disabled>Run</button>
    <button id="btnCancel" disabled>Cancel</button>
  </div>

  <div style="margin-top:8px;" class="hint" id="previewHint">Upload a video to start.</div>
  <div style="margin-top:6px;">
    Clicks: <b id="clickCount">0</b><span id="clickWarn"></span>
    <div id="clickList" class="small" style="margin-top:6px;"></div>
  </div>
</div>

<div class="card">
  <div class="videoWrap">
    <video id="vid" controls playsinline></video>
    <canvas id="overlay"></canvas>
  </div>
</div>

<div class="card">
  <h3>Status</h3>
  <pre id="out">{}</pre>
</div>

<div class="card">
  <h3>Clips</h3>
  <div id="clipsUi">—</div>
  <pre id="clips">—</pre>
</div>

<script src="/static/app.js" defer></script>
</body>
</html>

