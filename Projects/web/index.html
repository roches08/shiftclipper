<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ShiftClipper MVP</title>
  <style>
    body{font-family:system-ui;margin:20px;max-width:1200px}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .card{border:1px solid #ddd;border-radius:12px;padding:14px;flex:1;min-width:360px}
    label{display:block;margin-top:10px;font-weight:600}
    input,select,button{font-size:14px;padding:10px;border-radius:10px;border:1px solid #ccc}
    button{cursor:pointer}
    button:disabled{opacity:.5;cursor:not-allowed}
    pre{background:#0b1020;color:#d7e1ff;padding:12px;border-radius:12px;overflow:auto;max-height:360px}
    .bar{height:12px;background:#eee;border-radius:999px;overflow:hidden;margin-top:10px}
    .bar>div{height:12px;width:0%;}
    .small{font-size:12px;opacity:.75}
    .pill{display:inline-block;padding:3px 10px;border-radius:999px;background:#f2f5ff;border:1px solid #d9e4ff;font-size:12px;margin-left:8px}
    .videoWrap{position:relative}
    video{width:100%;border-radius:12px;background:#000;margin-top:8px}
    canvas#overlay{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;border-radius:12px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .clips a{display:block;margin:4px 0}
    .warn{color:#b35a00;font-size:12px}
  </style>
</head>
<body>
  <h1>ShiftClipper MVP <span class="pill" id="pill">idle</span></h1>

  <div class="row">
    <div class="card">
      <h3>1) Create Job</h3>
      <button id="btnCreate">Create Job</button>
      <div class="small">Job ID: <span id="jobId">—</span></div>

      <label>Camera Mode</label>
      <select id="cameraMode">
        <option value="broadcast" selected>Broadcast (recommended)</option>
        <option value="high">High / tight</option>
      </select>

      <label>Video</label>
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <input id="file" type="file" accept="video/*" />
        <button id="btnUpload" disabled>Upload</button>
        <button id="btnCancel" disabled>Cancel</button>
      </div>

      <div class="bar"><div id="barFill"></div></div>
      <div class="small" id="barText">idle</div>

      <h3 style="margin-top:18px">Player Selection</h3>
      <div class="small">Click <b>Select Player</b>, then click the player 3–8 times on the video.</div>

      <div class="grid2">
        <div>
          <label>Player Number</label>
          <input id="playerNumber" type="text" placeholder="e.g., 27" />
        </div>
        <div>
          <label>Jersey Color</label>
          <input id="jerseyColor" type="color" value="#00c853"/>
          <div class="small">Used for overlay + future filtering</div>
        </div>
      </div>

      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px">
        <button id="btnSelect" disabled>Select Player (clicks OFF)</button>
        <button id="btnClearClicks" disabled>Clear Clicks</button>
      </div>

      <div class="small">Clicks: <span id="clickCount">0</span><span id="clickWarn" class="warn"></span></div>
      <div class="small" id="clickList">—</div>

      <h3 style="margin-top:18px">2) Save Setup</h3>
      <button id="btnSave" disabled>Save Setup</button>

      <h3 style="margin-top:18px">3) Run</h3>
      <button id="btnRun" disabled>Run</button>
    </div>

    <div class="card">
      <h3>Preview</h3>
      <div class="videoWrap">
        <video id="vid" controls playsinline></video>
        <canvas id="overlay"></canvas>
      </div>
      <div class="small" id="previewHint">Proxy MP4 is generated after upload.</div>

      <h3 style="margin-top:18px">Output</h3>
      <pre id="out">{}</pre>

      <h3 style="margin-top:18px">Clips</h3>
      <div class="clips" id="clipsLinks"></div>
      <pre id="clips">—</pre>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
